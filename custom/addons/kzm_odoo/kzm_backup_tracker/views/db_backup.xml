<odoo>
    <data>

        <record id="kzm_backup_tracker_bucket_lines" model="ir.ui.view">
            <field name="name">kzm.backup.tracker.lines.tree</field>
            <field name="model">kzm.backup.tracker.lines</field>
            <field name="arch" type="xml">
                <tree editable="top">
                    <field name="sequence" widget="handle"/>
                    <field name="backup_name"/>
                    <field name="backup_path"/>
                    <field name="days_to_keep"/>
                    <field name="gcloud_backup_id" invisible="1"/>
                    <field name="active" invisible="1"/>
                </tree>
            </field>
        </record>
        <record id="kzm_backup_tracker.conf" model="ir.ui.view">
            <field name="name">kzm.backup.tracker.form</field>
            <field name="model">kzm.backup.tracker</field>
            <field name="arch" type="xml">
                <form>

                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="action_see_lines"
                                    type="object"
                                    class="oe_stat_button"
                                    icon="fa-home">
                                <field name="nbr_of_lines" widget="statinfo"
                                       string="Lines"/>
                            </button>
                        </div>
                        <group name="" style="width:80%;">
                            <h1>
                                <field name="name" default_focus="1"
                                       placeholder="Bucket Name"/>
                            </h1>
                        </group>
                        <group>
                            <field name="GOOGLE_APPLICATION_CREDENTIALS"
                                   default_focus="1"
                                   placeholder="/path/to/json/file"/>
                        </group>
                        <notebook>
                            <page string="Backups">
                                <field name="gcloud_lines">
                                    <tree editable="bottom">
                                        <field name="sequence" widget="handle"/>
                                        <field name="backup_name"/>
                                        <field name="backup_path"/>
                                        <field name="days_to_keep"/>
                                        <field name="gcloud_backup_id" invisible="1"/>
                                        <button name="refresh_bucket" string="Refresh"
                                                type="object" icon="fa-refresh"/>

                                    </tree>
                                </field>
                            </page>
                        </notebook>
                        <div style="text-align:center">
                            <button name="test_connection"
                                    type="object"
                                    string="Test GCloud Connection"
                                    icon="fa-google"/>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.server" id="refresh_bucket">
            <field name="name">Refresh bucket</field>
            <field name="model_id" ref="model_kzm_backup_tracker_lines"/>
            <field name="binding_model_id" ref="model_kzm_backup_tracker_lines"/>
            <field name="state">code</field>
            <field name="code">
                action = records.refresh_bucket()
            </field>
        </record>
        <record model="ir.actions.act_window" id="kzm_backup_tracker.action_window">
            <field name="name">Backup Tracker Configuration</field>
            <field name="res_model">kzm.backup.tracker</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.actions.act_window"
                id="kzm_backup_tracker_lines_action_window">
            <field name="name">Backup lines</field>
            <field name="res_model">kzm.backup.tracker.lines</field>
            <field name="view_mode">tree</field>
        </record>


    </data>
</odoo>
