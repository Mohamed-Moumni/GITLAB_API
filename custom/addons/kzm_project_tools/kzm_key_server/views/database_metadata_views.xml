<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="view_database_meatadata" model="ir.ui.view">
        <field name="name">database.metadata.form</field>
        <field name="model">database.metadata</field>
        <field name="arch" type="xml">
            <form string="Database MetaData">
                <header>
                    <button string="Sync Data" name="synch_data" type="object" icon="fa-refresh"/>
                    <button string="Sync Modules Paths" name="synch_path" type="object" icon="fa-refresh"/>

                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="odoo_version" string="Version Odoo"/>
                            <field name="db_creation_date" string="Date de Création"/>
                        </group>
                        <group>
                            <field name="user" required="1" string="User"/>
                            <field name="password" required="1" string="Password" password="True"/>
                            <field name="size" string="Taille"/>
                            <field name="is_backup_active" string="Backup activé"/>
                            <field name="nbr_users" string="NB Utilisateurs"/>
                        </group>


                    </group>
                    <notebook>
                        <page name="db_users" string="Licences mobiles">

                            <field name="users_ids" nolabel="1">
                                <tree width="100%" editable="bottom">
                                    <field name="id_ext" string="Id Externe" readonly="1" invisible="1"/>
                                    <field name="client_res_user_id" string="User" required="1"
                                           domain="[('database_metadata_id','=', parent.id)]"/>
                                    <field name="user_id_ext" string="User Id" invisible="1"/>
                                    <!--                                    <field name="name" string="Nom" invisble="1"/>-->
                                    <field name="client_employee_id" string="Employé"
                                           domain="[('database_metadata_id','=', parent.id)]"/>
                                    <field name="key_licence" readonly="1"/>
                                    <field name="used"/>
                                    <field name="is_active" string="Active"/>
                                    <field name="activation_date" required="1"/>
                                    <field name="expiration_date" required="1"/>
                                    <field name="modules_accessible" invisible="1"/>
                                    <field name="accessible_modules_ids" widget="many2many_tags" required="1"
                                           options="{'color_field': 'color'}"/>
                                    <field name="create_date" optional="hide"/>
                                    <field name="is_mobile" optional="hide"/>
                                    <field name="synched_with_client" invisible="1"/>

                                    <button
                                            string="Créer"
                                            name="action_create"
                                            type="object"
                                            attrs="{'invisible': [('synched_with_client','=', True)]}"
                                            icon="fa-pencil"


                                    />
                                    <button
                                            string="MAJ"
                                            name="action_maj"
                                            type="object"
                                            attrs="{'invisible': [('id_ext','=', 0)]}"
                                            icon="fa-refresh"
                                    />
                                    <button
                                            string="Supprimer"
                                            name="action_delete"
                                            type="object"
                                            icon="fa-trash"
                                    />


                                </tree>
                            </field>

                        </page>

                        <page name="installed_apps" string="Liste App installées">

                            <field name="installed_modules_ids" nolabel="1" readonly="1"
                            >
                                <tree editable="bottom" width="100%">
                                    <field name="name"/>
                                    <field name="version"/>
                                    <field name="dependencies"/>
                                    <field name="path"/>
                                </tree>
                            </field>

                        </page>
                        <page name="db_usres" string="Utilisateurs">

                            <field name="c_user_ids" nolabel="1" readonly="1"
                            >
                                <tree editable="bottom" width="100%">
                                    <field name="name"/>
                                </tree>
                            </field>

                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" />
                    <field name="activity_ids" />
                    <field name="message_ids" />
                </div>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_database_metadata">
        <field name="name">DataBase Metadata</field>
        <field name="res_model">database.metadata</field>
        <field name="view_mode">form</field>

    </record>


</odoo>